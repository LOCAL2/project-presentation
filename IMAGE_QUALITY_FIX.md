# แก้ปัญหาคุณภาพรูปภาพ (Image Quality Issues)

## สาเหตุของปัญหา

ปัญหาที่รูปภาพมีจุดดำๆ หรือภาพแตกอาจเกิดจาก:

1. **รูปภาพต้นฉบับที่อัปโหลดมีคุณภาพต่ำ** - ถ้ารูปที่อัปโหลดเข้า Supabase มีการบีบอัดมาก่อนแล้ว
2. **Supabase CDN Cache** - Supabase อาจเก็บ cache ของรูปที่ถูกปรับแต่งไว้
3. **Browser Cache** - เบราว์เซอร์อาจเก็บรูปเวอร์ชันเก่าที่มีปัญหาไว้

## สิ่งที่แก้ไขแล้ว

### 1. ปรับปรุงการอัปโหลดไฟล์
- เปลี่ยน cache control เป็น `public, max-age=31536000, immutable`
- ลบ transformation parameters ทั้งหมดออก
- ใช้ไฟล์ต้นฉบับโดยตรงจาก Supabase

### 2. ปรับปรุง CSS สำหรับการแสดงผลรูปภาพ
- เพิ่ม `image-rendering: optimize-contrast` เพื่อให้รูปชัดขึ้น
- ใช้ `bicubic interpolation` สำหรับ IE

## วิธีแก้ปัญหาที่แนะนำ

### ขั้นตอนที่ 1: ล้าง Browser Cache
1. กด `Ctrl + Shift + Delete` (Windows) หรือ `Cmd + Shift + Delete` (Mac)
2. เลือก "Cached images and files"
3. กด Clear data
4. รีเฟรชหน้าเว็บด้วย `Ctrl + F5` (hard refresh)

### ขั้นตอนที่ 2: ตรวจสอบรูปภาพต้นฉบับ
ถ้าปัญหายังคงอยู่ ให้ตรวจสอบว่า:
1. รูปภาพต้นฉบับที่อัปโหลดมีคุณภาพดีพอหรือไม่
2. ขนาดไฟล์ไม่ควรน้อยเกินไป (แนะนำอย่างน้อย 500KB สำหรับรูปคุณภาพดี)
3. ควรเป็นไฟล์ PNG หรือ JPG คุณภาพสูง (quality 90-100%)

### ขั้นตอนที่ 3: อัปโหลดรูปใหม่ (ถ้าจำเป็น)
ถ้ารูปเดิมมีปัญหา ให้:
1. เตรียมรูปภาพคุณภาพสูง (ไม่บีบอัด)
2. ไปที่หน้า Manage Gallery หรือ Manage Members
3. ลบรูปเก่าออก
4. อัปโหลดรูปใหม่

### ขั้นตอนที่ 4: ล้าง Supabase CDN Cache (ถ้าจำเป็น)
ถ้าปัญหายังคงอยู่ อาจต้องล้าง cache ที่ Supabase:
1. เข้า Supabase Dashboard
2. ไปที่ Storage → Settings
3. หา option สำหรับ "Purge CDN Cache" หรือติดต่อ Supabase Support

## การทดสอบ

หลังจากทำตามขั้นตอนแล้ว:
1. เปิดหน้าเว็บใน Incognito/Private mode
2. ตรวจสอบว่ารูปภาพชัดขึ้นหรือไม่
3. ถ้ายังมีปัญหา แสดงว่ารูปต้นฉบับใน Supabase มีปัญหา ต้องอัปโหลดใหม่

## หมายเหตุ

- การเปลี่ยนแปลงนี้จะมีผลกับรูปที่อัปโหลดใหม่เท่านั้น
- รูปเก่าที่มีปัญหาอาจต้องอัปโหลดใหม่
- ตรวจสอบให้แน่ใจว่ารูปต้นฉบับมีคุณภาพดีก่อนอัปโหลด
